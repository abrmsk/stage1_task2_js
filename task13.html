<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>2.1.13</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>

<nav>
    <a href="index.html">back</a>
    <ul class="navigate_tasks">
        <li><a href="task01_02.html">Tasks 1, 2</a></li>
        <li><a href="task03.html">Tasks 3</a></li>
        <li><a href="task04.html">Tasks 4</a></li>
        <li><a href="task05.html">Tasks 5</a></li>
        <li><a href="task06.html">Tasks 6</a></li>
        <li><a href="task07.html">Tasks 7</a></li>
        <li><a href="task08.html">Tasks 8</a></li>
        <li><a href="task09.html">Tasks 9</a></li>
        <li><a href="task10_11_12.html">Tasks 10, 11, 12</a></li>
        <li class="active"><a href="task13.html">Tasks 13</a></li>
        <li><a href="task14.html">Tasks 14</a></li>
        <li><a href="task15.html">Tasks 15</a></li>
        <li><a href="task16.html">Tasks 16</a></li>
        <li><a href="task17.html">Tasks 17</a></li>
        <li><a href="task18.html">Tasks 18</a></li>
        <li><a href="task19.html">Tasks 19</a></li>
    </ul>
</nav>

<section class="main">
    <div class="wrapper">
        <h2 class="assignment">Task 2.1.13</h2>

        <div class="task2113">
            <div class="container">
                <h3 class="title">use storage</h3>
                <p>(localStorage)</p>
                <textarea id="textarea_1" class="textarea_input"></textarea>
            </div>
            <div class="container">
                <h3 class="title">use storage</h3>
                <p>(cookies)</p>
                <textarea id="textarea_2" class="textarea_input"></textarea>
            </div>
            <div class="container">
                <h3 class="title">use storage</h3>
                <p>(sessionStorage)</p>
                <textarea id="textarea_3" class="textarea_input"></textarea>
            </div>
        </div>
    </div>
</section>

<script>
    // Local Storage
    document.getElementById("textarea_1").addEventListener("mouseout", () => {
        const data = JSON.stringify(document.getElementById("textarea_1").value);
        localStorage.setItem("myDataLocal", data);
    })

    // Cookie
    document.getElementById("textarea_2").addEventListener("mouseout", () => {

        let data = JSON.stringify(document.getElementById("textarea_2").value);

        console.log(data)

        if (data) {
            const date = new Date(Date.now() + 86400e3).toUTCString;
            document.cookie = `cookieValue1=${data}; expires=${date}`;
        }
    })

    // Session Storage
    document.getElementById("textarea_3").addEventListener("mouseout", () => {
        const data = JSON.stringify(document.getElementById("textarea_3").value);
        sessionStorage.setItem("myDataSession", data);
    })

    // Load Data from storages
    window.onload = () => {
        document.getElementById("textarea_1").value = JSON.parse(localStorage.getItem("myDataLocal"));
        document.getElementById("textarea_3").value = JSON.parse(sessionStorage.getItem("myDataSession"));

        let cookiesArray = document.cookie.split('; ');
        let cookiesObj = {}

        for (let i = 0; i < cookiesArray.length; i++) {
            let ind = cookiesArray[i].indexOf('=')
            let key = cookiesArray[i].substr(0, ind)
            cookiesObj[key] = cookiesArray[i].substr(ind + 1);
        }

        if (cookiesObj['cookieValue1']) {
            document.getElementById("textarea_2").value = JSON.parse(cookiesObj['cookieValue1']);
        }
    }

</script>
</body>
</html>